<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/css/bootstrap-grid.min.css">
  <link rel="stylesheet" href="./static/iconfont/iconfont.css">
  <title>tour-ui</title>
  <style>
    body {
      /* background-image: linear-gradient(to right, pink, lightgreen); */
      background-image: url('./src/assets/bg.jpg');
    }
  </style>
</head>

<body>
  <div>

    <button onclick="Tour.Auth.showAuthDialog(() => { console.log('ok') })">Show Dialog</button>

    <div>

      <div id="app">
        <div style="height: 300px; width: 600px;">

          <weather-view :location-id="3020"></weather-view>

          <location-map-view @m-click="markerClick" @click="mapClick" :lng="108.9398" :lat="34.3416" :markers="markers">
          </location-map-view>

          <poi-list-view @click="itemClick" :lng="108.9398" :lat="34.3416" type="HOTEL"></poi-list-view>

        </div>
      </div>

    </div>

  </div>

</body>
<script>
  new Tour.Vue({
    el: '#app',
    data() {
      return {
        markers: []
      }
    },
    methods: {
      itemClick(item) {
        this.markers.splice(0)
        this.markers.push({
          ...item,
          lng: item.location.longitude,
          lat: item.location.latitude,
          tip: '导航去 ' + item.name
        })
      },
      markerClick: function (loc) {
        window.open('https://uri.amap.com/navigation?to=' + loc.lng + ',' + loc.lat + ',' + encodeURIComponent(loc.name))
      },
      mapClick: function (loc) {
        window.open('https://uri.amap.com/navigation?to=' + loc.lng + ',' + loc.lat + ',haha')
      }
    },
    components: { PoiListView: Tour.Views.PoiListView, LocationMapView: Tour.Views.LocationMapView, WeatherView: Tour.Views.WeatherView }
  })
</script>

</html>